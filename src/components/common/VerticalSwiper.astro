---
import VerticalImage1 from "../../assets/web-dev/1.png";
import VerticalImage2 from "../../assets/web-dev/2.png";
import VerticalImage3 from "../../assets/web-dev/3.png";
import VerticalImage4 from "../../assets/web-dev/4.png";
import VerticalImage5 from "../../assets/web-dev/5.png";
import VerticalImage6 from "../../assets/web-dev/6.png";

const webSlides = [
  {
    id: "01",
    title: "Informative Websites",
    description:
      "With our visually appealing and highly functional websites, you will get maximum user engagements with an amazing browsing experience.",
    image: VerticalImage1,
  },
  {
    id: "02",
    title: "E-Commerce",
    description:
      "We got end-to-end E-commerce solutions for you, including secure payment gateways, user-friendly shopping experiences and inventory management.",
    image: VerticalImage2,
  },
  {
    id: "03",
    title: "Backend Web Development",
    description:
      "Get in touch with us for robust backend web development services, optimal performance, smooth integration and efficient data management.",
    image: VerticalImage3,
  },
  {
    id: "04",
    title: "Frontend Design & Development",
    description:
      "Our team of professionals excels in crafting captivating front-end designs with responsive and user-friendly interfaces.",
    image: VerticalImage4,
  },
  {
    id: "05",
    title: "Web Portals",
    description:
      "Our experts specialize in developing intuitive and feature-rich web portals providing smooth access to information and services.",
    image: VerticalImage5,
  },
  {
    id: "06",
    title: "Custom Web Apps",
    description:
      "Our custom web development applications cater to specific business needs ensuring unique functionalities and improved user engagement.",
    image: VerticalImage6,
  },
];
import Image from "astro/components/Image.astro";

const {
  title = "Website Services That set us apart",
  description = "Businesses may differentiate themselves from the competition online with a distinctive online presence thanks to our bespoke website services. Our staff has the know-how to provide custom solutions, whether it's designing a web application, constructing a content management system, or developing a unique e-commerce platform.",
  slides = webSlides,
} = Astro.props;
---

<section class="vertical-swiper-section py-12 lg:py-20">
  <h2
    class="internal-padding section-title mb-4 text-center text-xl font-semibold text-[#000047] capitalize md:text-2xl lg:text-3xl xl:text-4xl 2xl:text-[40px]"
  >
    {title}
  </h2>
  <p
    class="internal-padding section-description mx-auto max-w-7xl text-center text-xs text-[#2A2111] md:text-sm lg:text-base xl:text-lg"
  >
    {description}
  </p>

  <!-- Mobile/Tablet Layout (< 1024px) -->
  <div class="mobile-swiper-container mt-8 px-4 lg:hidden">
    <div class="swiper mobileVerticalSwiper">
      <div class="swiper-wrapper">
        {
          slides.map((slide) => (
            <div class="swiper-slide">
              <div class="mobile-slide-content mx-auto flex max-w-md flex-col items-center rounded-2xl bg-white p-6 shadow-lg">
                <span class="mb-4 text-6xl font-bold text-[#000000] md:text-7xl">
                  {slide.id}
                </span>
                <div class="mobile-slide-image-container mb-6 w-full">
                  <Image
                    src={slide.image}
                    alt={`${slide.title} Image`}
                    class="mobile-slide-image h-auto max-h-[300px] w-full rounded-lg object-contain"
                  />
                </div>
                <h3 class="mobile-slide-title mb-4 text-center text-xl font-semibold text-[#000047] md:text-2xl">
                  {slide.title}
                </h3>
                <p class="mobile-slide-description text-center text-sm text-[#2A2111] md:text-base">
                  {slide.description}
                </p>
              </div>
            </div>
          ))
        }
      </div>
      <div class="swiper-pagination mobile-pagination mx-auto"></div>
    </div>
  </div>

  <!-- Desktop Layout (>= 1024px) -->
  <div
    class="vertical-swiper-container relative mx-4 mt-12 hidden h-[600px] lg:mx-12 lg:block lg:h-[650px] xl:mx-20 xl:h-[710px]"
  >
    <div class="swiper verticalSwiper h-full">
      <div class="swiper-wrapper">
        {
          slides.map((slide) => (
            <div class="swiper-slide">
              <div class="slide-content relative flex h-full items-center">
                <span class="absolute -top-8 left-[40%] z-10 text-[100px] text-[#000000] lg:-top-10 lg:left-[42%] lg:text-[120px] xl:-top-12 xl:left-[43%] xl:text-[140px] 2xl:left-[45%] 2xl:text-[170px]">
                  {slide.id}
                </span>

                <div class="slide-image-container flex w-5/12 items-center justify-center lg:w-[45%] xl:w-1/2">
                  <Image
                    src={slide.image}
                    alt={`${slide.title} Image`}
                    class="slide-image h-auto max-h-[450px] w-full object-contain lg:max-h-[500px] xl:max-h-[600px] 2xl:max-h-[700px]"
                  />
                </div>

                <div class="slide-text flex w-7/12 flex-col pr-4 pl-8 lg:w-[55%] lg:pr-8 lg:pl-12 xl:w-1/2 xl:pl-16 2xl:pl-24">
                  <h2 class="slide-title mb-4 text-xl font-semibold text-[#000047] lg:mb-6 lg:text-2xl xl:text-3xl 2xl:text-4xl">
                    {slide.title}
                  </h2>
                  <p
                    set:html={slide.description}
                    class="slide-description text-sm leading-relaxed text-[#2A2111] lg:text-base xl:text-lg 2xl:text-xl"
                  />
                </div>
              </div>
            </div>
          ))
        }
      </div>
      <div class="swiper-pagination vertical-pagination"></div>
    </div>
  </div>
</section>

<script>
  import Swiper from "swiper";
  import { Pagination, Mousewheel, EffectFade, Autoplay } from "swiper/modules";
  import "swiper/css";
  import "swiper/css/pagination";
  import "swiper/css/effect-fade";
  import { gsap } from "../../utils/gsapUtils";

  document.addEventListener("DOMContentLoaded", function () {
    // GSAP animations for the section title and description
    gsap.from(".section-title", {
      y: 50,
      opacity: 0,
      duration: 1,
      ease: "power3.out",
      scrollTrigger: {
        trigger: ".section-title",
        start: "top 85%",
      },
    });

    gsap.from(".section-description", {
      y: 30,
      opacity: 0,
      duration: 1,
      delay: 0.2,
      ease: "power3.out",
      scrollTrigger: {
        trigger: ".section-description",
        start: "top 85%",
      },
    });

    // Mobile Swiper (Horizontal)
    const mobileSwiper = new Swiper(".mobileVerticalSwiper", {
      slidesPerView: 1,
      spaceBetween: 20,
      modules: [Pagination, Autoplay],
      pagination: {
        el: ".mobile-pagination",
        clickable: true,
      },
      autoplay: {
        delay: 4000,
        disableOnInteraction: false,
      },
      speed: 600,
      on: {
        init: function () {
          animateMobileSlide(this.activeIndex);
        },
        slideChange: function () {
          animateMobileSlide(this.activeIndex);
        },
      },
    });

    // Desktop Swiper (Vertical)
    const desktopSwiper = new Swiper(".verticalSwiper", {
      direction: "vertical",
      slidesPerView: 1,
      spaceBetween: 30,
      mousewheel: {
        forceToAxis: true,
        sensitivity: 1,
        releaseOnEdges: true,
      },
      modules: [Pagination, Mousewheel, EffectFade],
      effect: "fade",
      fadeEffect: {
        crossFade: true,
      },
      speed: 800,
      pagination: {
        el: ".vertical-pagination",
        clickable: true,
      },
      on: {
        init: function () {
          animateDesktopSlide(this.activeIndex);
        },
        slideChange: function () {
          animateDesktopSlide(this.activeIndex);
        },
      },
    });

    // Animation function for mobile slides
    function animateMobileSlide(index) {
      const slides = document.querySelectorAll(
        ".mobileVerticalSwiper .swiper-slide",
      );
      const activeSlide = slides[index];

      if (!activeSlide) return;

      // Reset all slides
      gsap.set(".mobile-slide-number", { opacity: 0, scale: 0.8 });
      gsap.set(".mobile-slide-image", { opacity: 0, y: 20 });
      gsap.set(".mobile-slide-title", { opacity: 0, y: 15 });
      gsap.set(".mobile-slide-description", { opacity: 0, y: 10 });

      // Animate active slide
      const tl = gsap.timeline();

      tl.to(activeSlide.querySelector(".mobile-slide-number"), {
        opacity: 0.2,
        scale: 1,
        duration: 0.6,
        ease: "back.out(1.2)",
      })
        .to(
          activeSlide.querySelector(".mobile-slide-image"),
          {
            opacity: 1,
            y: 0,
            duration: 0.7,
            ease: "power2.out",
          },
          "-=0.3",
        )
        .to(
          activeSlide.querySelector(".mobile-slide-title"),
          {
            opacity: 1,
            y: 0,
            duration: 0.6,
            ease: "power2.out",
          },
          "-=0.4",
        )
        .to(
          activeSlide.querySelector(".mobile-slide-description"),
          {
            opacity: 1,
            y: 0,
            duration: 0.6,
            ease: "power2.out",
          },
          "-=0.3",
        );
    }

    // Animation function for desktop slides
    function animateDesktopSlide(index) {
      const slides = document.querySelectorAll(".verticalSwiper .swiper-slide");
      const activeSlide = slides[index];

      if (!activeSlide) return;

      // Reset all slides with reduced motion
      gsap.set(".slide-number", { opacity: 0 });
      gsap.set(".slide-image", { opacity: 0, scale: 0.95 });
      gsap.set(".slide-title", { opacity: 0, x: -20 });
      gsap.set(".slide-description", { opacity: 0, x: -15 });

      // Animate active slide
      const tl = gsap.timeline();

      tl.to(activeSlide.querySelector(".slide-number"), {
        opacity: 0.1,
        duration: 0.5,
        ease: "power2.out",
      })
        .to(
          activeSlide.querySelector(".slide-image"),
          {
            opacity: 1,
            scale: 1,
            duration: 0.8,
            ease: "power2.out",
          },
          "-=0.3",
        )
        .to(
          activeSlide.querySelector(".slide-title"),
          {
            opacity: 1,
            x: 0,
            duration: 0.6,
            ease: "power2.out",
          },
          "-=0.5",
        )
        .to(
          activeSlide.querySelector(".slide-description"),
          {
            opacity: 1,
            x: 0,
            duration: 0.6,
            ease: "power2.out",
          },
          "-=0.4",
        );
    }
  });
</script>

<style>
  /* Mobile Swiper Styles */
  .mobile-swiper-container {
    position: relative;
    overflow: visible;
    padding-bottom: 50px;
  }

  .mobile-pagination {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    width: 100%;
    display: flex;
    justify-content: center;
    gap: 8px;
    z-index: 20;
    margin-top: 50px;
  }

  .mobile-pagination :global(.swiper-pagination-bullet) {
    width: 10px;
    height: 10px;
    background: #d9d9d9;
    opacity: 1;
    transition: all 0.3s ease;
    border-radius: 50%;
  }

  .mobile-pagination :global(.swiper-pagination-bullet-active) {
    background: #9d7eff;
    width: 24px;
    border-radius: 5px;
  }

  /* Desktop Swiper Styles */
  .vertical-swiper-container {
    position: relative;
    overflow: hidden;
  }

  .vertical-pagination {
    position: absolute;
    right: 20px;
    top: 50%;
    transform: translateY(-50%);
    display: flex;
    flex-direction: column;
    z-index: 20;
    gap: 12px;
  }

  .vertical-pagination .swiper-pagination-bullet {
    width: 10px;
    height: 10px;
    background: #d9d9d9;
    opacity: 1;
    transition: all 0.3s ease;
    border-radius: 50%;
  }

  .vertical-pagination .swiper-pagination-bullet-active {
    background: #9d7eff;
    width: 12px;
    height: 12px;
    box-shadow: 0 0 10px rgba(157, 126, 255, 0.5);
  }

  .swiper-slide {
    opacity: 0;
    transition: opacity 0.4s ease;
  }

  .swiper-slide-active {
    opacity: 1;
  }

  .slide-content {
    overflow: hidden;
  }

  /* Improved responsive styles */
  @media (min-width: 1024px) and (max-width: 1599px) {
    .slide-image-container {
      width: 45%;
    }

    .slide-text {
      width: 55%;
      padding-left: 2rem;
    }
  }

  /* Smooth transitions */
  .slide-image,
  .slide-title,
  .slide-description,
  .mobile-slide-image,
  .mobile-slide-title,
  .mobile-slide-description {
    will-change: opacity, transform;
  }
</style>
