---
import VerticalImage1 from "../../assets/web-dev/1.png";
import VerticalImage2 from "../../assets/web-dev/2.png";
import VerticalImage3 from "../../assets/web-dev/3.png";
import VerticalImage4 from "../../assets/web-dev/4.png";
import VerticalImage5 from "../../assets/web-dev/5.png";
import VerticalImage6 from "../../assets/web-dev/6.png";


// Create array of data for swiper slides
const webSlides = [
  {
    id: "01",
    title: "Informative Websites",
    description:
      "With our visually appealing and highly functional websites, you will get maximum user engagements with an amazing browsing experience.",
    image: VerticalImage1,
  },
  {
    id: "02",
    title: "E-Commerce",
    description:
      "We got end-to-end E-commerce solutions for you, including secure payment gateways, user-friendly shopping experiences and inventory management.",
    image: VerticalImage2,
  },
  {
    id: "03",
    title: "Backend Web Development",
    description:
      "Get in touch with us for robust backend web development services, optimal performance, smooth integration and efficient data management.",
    image: VerticalImage3,
  },
  {
    id: "04",
    title: "Frontend Design & Development",
    description:
      "Our team of professionals excels in crafting captivating front-end designs with responsive and user-friendly interfaces.",
    image: VerticalImage4,
  },
  {
    id: "05",
    title: "Web Portals",
    description:
      "Our experts specialize in developing intuitive and feature-rich web portals providing smooth access to information and services.",
    image: VerticalImage5,
  },
  {
    id: "06",
    title: "Custom Web Apps",
    description:
      "Our custom web development applications cater to specific business needs ensuring unique functionalities and improved user engagement.",
    image: VerticalImage6,
  },
];
import Image from "astro/components/Image.astro";

const {
  title = "Website Services That set us apart",
  description = "Businesses may differentiate themselves from the competition online with a distinctive online presence thanks to our bespoke website services. Our staff has the know-how to provide custom solutions, whether it's designing a web application, constructing a content management system, or developing a unique e-commerce platform.",
  slides = webSlides,
} = Astro.props;
---

<section class="vertical-swiper-section">
  <h2
    class="mb-4 text-center internal-padding font-semibold text-[#000047] capitalize text-xl md:text-2xl lg:text-3xl xl:text-4xl 2xl:text-[40px] section-title"
  >
    {title}
  </h2>
  <p
    class="mx-auto max-w-7xl internal-padding text-center text-xs text-[#2A2111] xl:text-sm 2xl:text-base section-description"
  >
    {description}
  </p>

  <div class="vertical-swiper-container relative mr-4 lg:mx-20 mt-6 lg:mt-12 h-[710px]">
    <div class="swiper verticalSwiper h-full">
      <div class="swiper-wrapper">
        {
          slides.map((slide) => (
            <div class="swiper-slide">
              <div class="relative flex slide-content">
                <span class="slide-number absolute z-10 -top-12 2xl:-top-10 left-[43%] 2xl:left-[45%] text-[#000000] lg:text-[140px] xl:text-[150px] 2xl:text-[170px]">
                  {slide.id}
                </span>
                <div class="slide-image-container w-1/2">
                  <Image
                    src={slide.image}
                    alt={`${slide.title} Image`}
                    class="slide-image h-[780px] w-full object-contain"
                  />
                </div>
                <div class="slide-text mt-24 ml-16 xl:m;-24 2xl:ml-32 flex w-1/2 max-w-[550px] flex-col">
                  <h2 class="slide-title mb-6 font-semibold text-[#000047] lg:text-2xl xl:text-3xl 2xl:text-4xl 3xl:text-[40px]">
                    {slide.title}
                  </h2>
                  <p
                    set:html={slide.description}
                    class="slide-description mb-7 text-[#2A2111] text-sm lg:text-base xl:text-lg 2xl:text-xl 3xl:text-xl"
                  />
                  {/* <div class="slide-cta">
                    <button class="learn-more-btn bg-[#9d7eff] hover:bg-[#8a63ff] text-white font-medium py-2 px-5 rounded-md transition-all duration-300 opacity-0">
                      Learn More
                    </button>
                  </div> */}
                </div>
              </div>
            </div>
          ))
        }
      </div>
      <div class="swiper-pagination vertical-pagination"></div>
    </div>
  </div>
</section>

<script>
  import Swiper from "swiper";
  import { Pagination, Mousewheel, EffectFade } from "swiper/modules";
  import "swiper/css";
  import "swiper/css/pagination";
  import "swiper/css/effect-fade";
  import { gsap } from "../../utils/gsapUtils";

  document.addEventListener("DOMContentLoaded", function () {
    // GSAP animations for the section title and description
    gsap.from(".section-title", {
      y: 50,
      opacity: 0,
      duration: 1,
      ease: "power3.out"
    });

    gsap.from(".section-description", {
      y: 30,
      opacity: 0,
      duration: 1,
      delay: 0.3,
      ease: "power3.out"
    });

    // Initialize Swiper
    const swiper = new Swiper(".verticalSwiper", {
      direction: "vertical",
      slidesPerView: 1,
      spaceBetween: 30,
      mousewheel: true,
      modules: [Pagination, Mousewheel, EffectFade],
      effect: "fade",
      fadeEffect: {
        crossFade: true
      },
      speed: 800,
      parallax: true,
      pagination: {
        el: ".vertical-pagination",
        clickable: true,
        renderBullet: function (index, className) {
          return `<span class="${className}"></span>`;
        },
      },
      on: {
        init: function() {
          animateSlideContent(this.activeIndex);
        },
        slideChange: function() {
          animateSlideContent(this.activeIndex);
        }
      }
    });

    // Function to animate the content of the active slide
    function animateSlideContent(index) {
      const activeSlide = document.querySelectorAll('.swiper-slide')[index];
      
      if (!activeSlide) return;

      // Reset all slides
      gsap.set('.slide-number', { opacity: 0, scale: 0.5 });
      gsap.set('.slide-image', { opacity: 0, x: -50 });
      gsap.set('.slide-title', { opacity: 0, y: 30 });
      gsap.set('.slide-description', { opacity: 0, y: 20 });
      gsap.set('.learn-more-btn', { opacity: 0, y: 15 });
      
      // Create a timeline for the active slide
      const tl = gsap.timeline();
      
      // Animate the active slide elements
      tl.to(activeSlide.querySelector('.slide-number'), {
        opacity: 0.7,
        scale: 1,
        duration: 0.8,
        ease: "back.out(1.7)"
      })
      .to(activeSlide.querySelector('.slide-image'), {
        opacity: 1,
        x: 0,
        duration: 0.8,
        ease: "power2.out"
      }, "-=0.4")
      .to(activeSlide.querySelector('.slide-title'), {
        opacity: 1,
        y: 0,
        duration: 0.6,
        ease: "power2.out"
      }, "-=0.4")
      .to(activeSlide.querySelector('.slide-description'), {
        opacity: 1,
        y: 0,
        duration: 0.6,
        ease: "power2.out"
      }, "-=0.3")
      .to(activeSlide.querySelector('.learn-more-btn'), {
        opacity: 1,
        y: 0,
        duration: 0.6,
        ease: "power2.out"
      }, "-=0.3");
    }

    // Add hover effects to the buttons
    const buttons = document.querySelectorAll('.learn-more-btn');
    buttons.forEach(btn => {
      btn.addEventListener('mouseenter', () => {
        gsap.to(btn, {
          scale: 1.05,
          duration: 0.3
        });
      });
      
      btn.addEventListener('mouseleave', () => {
        gsap.to(btn, {
          scale: 1,
          duration: 0.3
        });
      });
    });

    // Initial animation for the first slide
    animateSlideContent(0);
  });
</script>

<style>
  .vertical-swiper-container {
    position: relative;
    overflow: hidden;
  }

  .vertical-pagination {
    position: absolute;
    right: 20px;
    top: 50%;
    transform: translateY(-50%);
    display: flex;
    flex-direction: column;
    z-index: 20;
    gap: 10px;
  }

  .swiper-pagination-bullet {
    width: 10px;
    height: 10px;
    background: #d9d9d9;
    opacity: 1;
    margin: 6px 0 !important;
    transition: all 0.3s ease;
  }

  .swiper-pagination-bullet-active {
    background: #9d7eff;
    width: 12px;
    height: 12px;
    box-shadow: 0 0 10px rgba(157, 126, 255, 0.5);
  }
  
  .swiper-slide {
    opacity: 0;
    transition: opacity 0.5s ease;
  }
  
  .swiper-slide-active {
    opacity: 1;
  }
  
  .slide-content {
    overflow: hidden;
  }
</style>
