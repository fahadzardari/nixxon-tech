---
const panels = [
  {
    title: "Corporate Websites",
    body: "Each corporate website built by Nixxon Australia is tailored...",
    cta: ["Get Started", "Live Chat"],
  },
  {
    title: "E-Commerce Websites",
    body: "Sell more with bespoke storefronts engineered for conversions.",
    cta: ["View Work"],
  },
  {
    title: "Landing Pages",
    body: "High-impact funnels for campaigns and launches.",
    cta: ["See Case Studies"],
  },
  {
    title: "Responsive Websites",
    body: "Pixel-perfect across every device.",
    cta: ["Book a Call"],
  },
  {
    title: "WordPress Websites",
    body: "Enterprise-ready experiences on WordPress.",
    cta: ["Discover More"],
  },
];
---

<section class="internal-padding">
  <h2
    class="mb-1 font-semibold text-[#000047] lg:text-3xl xl:text-4xl 2xl:text-[40px]"
  >
    Website Services That Set Us Apart
  </h2>
  <h3 class="mb-3 font-medium text-[#000000] lg:text-lg xl:text-xl 2xl:text-xl">
    Whether it's a store, blog, or corporate site we make it happen.
  </h3>
  <p class="mb-12 text-xs text-[#2A2111] xl:text-sm 2xl:text-base">
    From sleek online stores that drive sales, to engaging blogs that share your
    voice, to professional corporate websites that inspire trust our team
    delivers it all. No matter your industry or audience, we combine strategy,
    design, and technology to create websites that not only look great but also
    work flawlessly for your goals.
  </p>
  <div
    data-accordion
    class="horizontal-accordion flex h-[600px] overflow-hidden bg-gradient-to-r from-[#0B1A36] via-[#4B1E93] to-[#6F1DB7] text-white"
  >
    {
      panels.map((panel, index) => (
        <button
          type="button"
          data-accordion-item
          data-active={index === 0}
          aria-expanded={index === 0 ? "true" : "false"}
          class="group relative flex flex-col justify-between transition-[flex-basis] duration-500 ease-out focus:outline-none"
          style={`--basis: ${index === 0 ? "65%" : "8.75%"};`}
        >
          <div class="flex h-full w-full">
            {/* Vertical title for active state - matching inactive width */}
            <div class="hidden h-full w-[6.75vw] items-center justify-center bg-gradient-to-r from-[#101E39] to-[#643DB4] group-data-[active=true]:flex">
              <h3 class="writing-vertical-lr rotate-180 text-[26px] font-semibold text-white uppercase">
                {panel.title}
              </h3>
            </div>

            {/* Content area for active state */}
            <div class="flex h-full flex-1 flex-col px-8 py-6 text-left group-data-[active=false]:hidden">
              <h3 class="pb-4 text-3xl leading-tight font-semibold text-white">
                {panel.title}
              </h3>
              <p class="text-sm leading-6 text-white/80">{panel.body}</p>
              <div class="mt-auto flex flex-wrap gap-3 pt-6 text-sm font-semibold">
                {panel.cta.map((label) => (
                  <span class="cursor-pointer rounded-full bg-white/15 px-4 py-2 transition-colors hover:bg-white/25">
                    {label}
                  </span>
                ))}
              </div>
            </div>

            {/* Vertical title only for inactive state - full width */}
            <div class="hidden h-full w-full items-center justify-center bg-gradient-to-r from-[#101E39] to-[#643DB4] group-data-[active=false]:flex">
              <h3 class="writing-vertical-lr rotate-180 text-[26px] font-semibold text-white uppercase">
                {panel.title}
              </h3>
            </div>
          </div>

          <span class="pointer-events-none absolute inset-y-0 left-0 w-[1px] bg-white/10" />
        </button>
      ))
    }
  </div>
</section>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const accordion = document.querySelector("[data-accordion]");
    if (!accordion) return;

    const items = [...accordion.querySelectorAll("[data-accordion-item]")];
    const totalItems = items.length;

    // Calculate widths - narrower inactive tabs to fit better
    const inactiveWidth = 8.75; // Each inactive tab width
    const totalInactiveWidth = inactiveWidth * (totalItems - 1);
    const activeWidth = 100 - totalInactiveWidth;

    const widths = { active: `${activeWidth}%`, inactive: `${inactiveWidth}%` };

    function setActive(target) {
      items.forEach((item) => {
        const isActive = item === target;
        item.dataset.active = isActive ? "true" : "false";
        item.setAttribute("aria-expanded", isActive ? "true" : "false");
        item.style.setProperty(
          "--basis",
          isActive ? widths.active : widths.inactive,
        );
      });
    }

    items.forEach((item) => {
      item.addEventListener("click", () => setActive(item));
    });
  });
</script>

<style>
  /* Make each item use the custom basis */
  .horizontal-accordion [data-accordion-item] {
    flex: 0 0 var(--basis, 8.75%);
  }

  .writing-vertical-lr {
    writing-mode: vertical-lr;
    text-orientation: mixed;
  }
</style>